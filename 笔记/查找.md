# 查找

## 查找的基本概念

1. 查询某个特定的数据元素是否在查找表中
2. 检索满足条件的某个特定的数据元素的各种属性
3. 在查找表中插入一个数据元素
4. 从查找表中删除某个数据元素

静态查找表：顺序查找、折半查找、散列查找

动态查找表：二叉排序树的查找、散列查找、二叉平衡树、B 树。
平均查找长度：一次查找的长度是指需要比较的关键字次数，而平均查找长度是所有查找过程中进行关键字的比较次数的平均值。**平均查找长度是衡量查找算法效率的最主要的指标**。

## 顺序查找和折半查找

### 顺序查找

一般线性表的顺序查找：查找成功时的平均查找长度为 (n+1)/2，查找不成功时的平均查找长度为 n+1；缺点是当 n 较大时，平均查找长度较大，效率低，优点是对数据元素的存储没有要求，顺序存储或链式存储皆可。
有序表的顺序查找：查找成功时的平均查找长度为 (n+1)/2，查找不成功时的平均查找长度为 n/2+n/(n+1)。

---

### 折半查找

又称为二分查找，针对的是一个有序的数据集合，查找思想类似分治思想。每次都通过跟区间的中间元素对比，将待查找的区间缩小为之前的一半，直到找到要查找的元素，或者区间被缩小为 0。

![二分查找](../图示/二分查找.jpg)
```c++
int bsearch(int[] a, int n, int value) {
  int low = 0;
  int high = n - 1;

  while (low <= high) {
    int mid = (low + high) / 2;
    if (a[mid] == value) {
      return mid;
    } else if (a[mid] < value) {
      low = mid + 1;
    } else {
      high = mid - 1;
    }
  }

  return -1;
}

```
若有序序列有 n 个元素，则对应的判定树有 n 个圆形的非叶结点和 n+1 各方形的叶结点。
时间复杂度为O(logn)。

二分查找依赖的是顺序表结构，即数组，**不适用于链表**。

二分查找针对的是有序数据。

#### 变体

![二分查找变体](../图示/二分查找变体.jpg)

----

### 分块查找

又称为索引顺序查找，吸取了顺序查找和折半查找各自的优点，既有动态结构，又适于快速查找。
将查找表分为若干个子块，块内的元素可以无序，但块之间是有序的，即第一个块中的最大关键字小于第二个块中的所有记录的关键字，以此类推。再建立一个索引表，索引表中的每个元素含有各块的最大关键字和各块总第一个元素的地址，索引表按关键字有序排列。
**分块查找的平均查找长度为索引查找和块内查找的平均长度之和**，设将长度为 n 的查找表均匀分为 b 块，每块有 s 个记录，若在块内和索引表中均采用顺序查找，则**平均查找长度为 (b+1)/2+(s+1)/2=(s^2+2s+n)/(2s)**，此时 **若 S = 根号 n，则平均查找长度取最小值**。若对索引表采用折半查找，则平均查找长度为 **log2 (b+1)+(s+1)/2**。

## 跳表

为一个值有序的链表建立多级索引，比如每 2 个节点提取一个节点到上一级，把抽出来的那一级叫做索引或索引层。其中 down 表示 down 指针，指向下一级节点。以此类推，对于节点数为 n 的链表，大约可以建立 log2n-1 级索引。这种为链表建立多级索引的数据结构就称为跳表。

![跳表](../图示/跳表.jpg)

如果链表有 n 个节点，每 2 个节点抽取抽出一个节点作为上一级索引的节点，那第 1 级索引的节点个数大约是 n/2，第 2 级索引的节点个数大约是 n/4，依次类推，第 k 级索引的节点个数就是 n/(2^k)。假设索引有 h 级别，最高级的索引有 2 个节点，则有 n/(2^h)=2，得出 h=log2n-1，包含原始链表这一层，整个跳表的高度就是 log2n。

![跳表插入](../图示/跳表插入.jpg)

跳表中查询某个数据的时间复杂度是O(logn)，空间复杂度是O(n)。

跳表插入以及删除数据时间复杂度为O(logn)。

### 插入优化

不断插入数据不更新索引会导致退化成单链表。

![跳表退化](../图示/跳表退化.jpg)

通过一个随机函数，来决定将这个结点插入到哪几级索引中，比如随机函数生成了值 K，就将这个结点添加到第一级到第 K 级这 K 级索引中。

![跳表插入添加索引层](../图示/跳表插入添加索引层.jpg)



### 应用

有序集合对象（SortedSet）底层用跳表和字典实现。

## B 树和 B+ 树



## 散列（hash）树



## 字符串模式匹配

